% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/perm_oobtest.R
\name{perm_oobtest}
\alias{perm_oobtest}
\title{RFPerm OOB-vs-test permutation test using random forests (ranger)}
\usage{
perm_oobtest(
  df_train,
  df_test,
  classification = "FALSE",
  B = 5000,
  scaling = FALSE
)
}
\arguments{
\item{df_train}{Data frame containing predictors and response \code{Y}.}

\item{df_test}{Data frame containing the same predictors and response \code{Y}.}

\item{classification}{Character flag retained for compatibility (currently unused).}

\item{B}{Integer scalar; number of permutations, by default 5000.}

\item{scaling}{Logical; if TRUE, scales predictors within each dataset using \code{scale()}.}
}
\value{
Numeric scalar p-value (one-sided; small values indicate increased test error).
}
\description{
Fits a random forest on a reference/training batch, compares the training OOB squared
errors with the test-batch squared prediction errors, and returns a one-sided
permutation p-value for increased test error (drift).
}
\details{
INPUT CONTRACT:
\itemize{
  \item \code{df_train}, \code{df_test} must be \code{data.frame}s.
  \item Response column must be named \code{Y}.
  \item Predictors are assumed to be in columns \code{1:(ncol(df)-1)} and response in the last column.
  \item \code{df_train} and \code{df_test} must have the same predictor columns (names/order recommended).
  \item Predictors should be numeric (or compatible with \code{ranger}).
}

The p-value is computed as the upper-tail probability under the permutation null:
\deqn{p = 1 - \hat{F}_{\mathrm{perm}}(d_0)}
where \eqn{d_0 = \bar{e}_{test} - \bar{e}_{train}}.
}
\examples{
# df_train and df_test must contain response column named Y
# pval <- perm_oobtest(df_train, df_test, B = 2000)

}
